'use strict';var _createClass=function(){function a(b,c){for(var e,d=0;d<c.length;d++)e=c[d],e.enumerable=e.enumerable||!1,e.configurable=!0,'value'in e&&(e.writable=!0),Object.defineProperty(b,e.key,e)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var Form=function(){function a(){_classCallCheck(this,a),this._name='',this._surname='',this._login='',this._password='',this._XHR=!1,this._api='http://ec2-18-220-242-48.us-east-2.compute.amazonaws.com/api'}return a.prototype.init=function init(){this._$login=$('.js-l-login'),this._$password=$('.js-l-password'),this._$signupLogin=$('.js-s-login'),this._$signupPassword=$('.js-s-password'),this._$name=$('.js-name'),this._$surname=$('.js-surname'),this._$toggleFormButton=$('.js-toggle-form-btn'),this._$signinButton=$('.js-signin-btn'),this._$loginButton=$('.js-login-btn'),this._$loginForm=$('.js-form-login'),this._$signinForm=$('.js-form-signin'),this._$toggleFormButton.on('click',this._onClickToggleFormButton.bind(this)),this._$login.on('change',this._onChangeLogin.bind(this)),this._$signupLogin.on('change',this._onChangeLogin.bind(this)),this._$password.on('change',this._onChangePassword.bind(this)),this._$signupPassword.on('change',this._onChangePassword.bind(this)),this._$signinButton.on('click',this._onClickSignin.bind(this)),this._$loginButton.on('click',this._onClickLogin.bind(this))},a.prototype._onClickToggleFormButton=function _onClickToggleFormButton(){this._XHR||(this._$loginForm.toggleClass('form_active'),this._$signinForm.toggleClass('form_active'),this._$login.val(this._login),this._$password.val(this._password),this._$signupLogin.val(this._login),this._$signupPassword.val(this._password))},a.prototype._onChangeLogin=function _onChangeLogin(b){this._login=b.target.value},a.prototype._onChangePassword=function _onChangePassword(b){this._password=b.target.value},a.prototype._onClickLogin=function _onClickLogin(){var c=this;if(!this._XHR){var b={login:this._login,password:this._password};$.ajax({type:'DELETE',contentType:'application/json',headers:{'Access-Control-Allow-Origin':'*'},data:b,url:this._api+'/user',dataType:'json',beforeSend:function beforeSend(){c._XHR=!0},success:function success(d){console.warn(d)},error:function error(d){console.error(d)},complete:function complete(){console.warn(c._XHR),c._XHR=!1}})}},a.prototype._onClickSignin=function _onClickSignin(){var c=this;if(!this._XHR){var b={login:this._login,password:this._password,firstname:this.name,lastname:this.surname};$.ajax({type:'POST',contentType:'application/json',headers:{'Access-Control-Allow-Origin':'*'},data:b,url:this._api+'/user',dataType:'json',beforeSend:function beforeSend(){c._XHR=!0},success:function success(d){console.warn(d)},error:function error(d){console.error(d)},complete:function complete(){console.warn(c._XHR),c._XHR=!1}})}},_createClass(a,[{key:'name',get:function get(){return this._$name.val()}},{key:'surname',get:function get(){return this._$surname.val()}}]),a}();document.addEventListener('DOMContentLoaded',function(){new Form().init()});